/* ═══════════════════════════════════════════════════
   DITHER EFFECTS — Bayer ordered dithering applied
   
   Uses CSS custom properties generated by dither.js:
   --dither-subtle    (dark stipple, low opacity)
   --dither-medium    (stronger stipple)
   --dither-green     (green-tinted pattern)
   --dither-red       (red-tinted pattern)
   --dither-amber     (amber selection pattern)
   --dither-dissolve  (mask for captured dice)
   --dither-half      (50% threshold binary)
   --dither-victory   (heavy overlay)
   ═══════════════════════════════════════════════════ */

/* ─── 1. BOARD BACKGROUND — subtle Bayer texture ─── */
.board {
    position: relative;
}
.board::after {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--dither-subtle);
    background-size: 32px 32px;
    image-rendering: pixelated;
    pointer-events: none;
    opacity: 0.4;
    mix-blend-mode: multiply;
}

/* ─── 2. BOARD DIVIDER — dithered gradient band ─── */
.board-divider {
    position: relative;
    padding: var(--sp-3) 0;
}
.board-divider::before,
.board-divider::after {
    /* Override the original simple line */
    height: 12px;
    background: var(--dither-half);
    background-size: 32px 32px;
    image-rendering: pixelated;
    opacity: 0.15;
}

/* ─── 3. CAPTURED DICE — darkened ─── */
.die.captured {
    opacity: 0.25;
    cursor: default;
    transform: none !important;
    filter: grayscale(1) !important;
}
.die.captured .die-value {
    color: var(--text-4);
    text-shadow: none;
}
.die.captured .die-label {
    opacity: 0.3;
}
.die.captured .die-key {
    opacity: 0;
}

/* ─── 4. ACTIVE PLAYER AREA — dithered glow ─── */
.board-half--you.active {
    position: relative;
}
.board-half--you.active::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--dither-green);
    background-size: 32px 32px;
    image-rendering: pixelated;
    pointer-events: none;
    opacity: 0.5;
    border-radius: inherit;
    z-index: 0;
}

.board-half--opp.active {
    position: relative;
}
.board-half--opp.active::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--dither-red);
    background-size: 32px 32px;
    image-rendering: pixelated;
    pointer-events: none;
    opacity: 0.5;
    border-radius: inherit;
    z-index: 0;
}

/* Ensure dice sit above the glow layer */
.dice-row {
    position: relative;
    z-index: 1;
}
.board-label {
    position: relative;
    z-index: 1;
}

/* ─── 5. SELECTED DIE — dithered amber highlight ─── */
.die.selected::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: var(--dither-amber);
    background-size: 32px 32px;
    image-rendering: pixelated;
    pointer-events: none;
    opacity: 0.5;
    z-index: 1;
    mix-blend-mode: screen;
}

/* ─── 6. TARGET DIE — dithered red highlight ─── */
.die.target::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: var(--dither-red);
    background-size: 32px 32px;
    image-rendering: pixelated;
    pointer-events: none;
    opacity: 0.6;
    z-index: 1;
    mix-blend-mode: screen;
}

/* ─── 7. MENU OVERLAY — dithered dark background ─── */
.menu-overlay::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--dither-medium);
    background-size: 32px 32px;
    image-rendering: pixelated;
    pointer-events: none;
    opacity: 0.3;
}

/* ─── 8. VICTORY MODAL OVERLAY — heavy dither ─── */
.modal-overlay::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--dither-victory);
    background-size: 32px 32px;
    image-rendering: pixelated;
    pointer-events: none;
    opacity: 0.6;
}

/* ─── 9. SIDE PANEL HEADER — dithered bottom edge ─── */
.panel-header::after {
    content: '';
    position: absolute;
    bottom: -6px;
    left: 0;
    right: 0;
    height: 6px;
    background: var(--dither-subtle);
    background-size: 32px 32px;
    image-rendering: pixelated;
    pointer-events: none;
    opacity: 0.5;
}
.panel-header {
    position: relative;
}

/* ─── 10. PLAYER BARS — dithered inner edge ─── */
.player-bar--opp::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--dither-subtle);
    background-size: 32px 32px;
    image-rendering: pixelated;
    pointer-events: none;
    opacity: 0.6;
}
.player-bar--opp {
    position: relative;
}

.player-bar--you::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--dither-subtle);
    background-size: 32px 32px;
    image-rendering: pixelated;
    pointer-events: none;
    opacity: 0.6;
}
.player-bar--you {
    position: relative;
}